{"ast":null,"code":"import _regeneratorRuntime from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Route,Link,Switch}from'react-router-dom';import Cast from'../../cast/Cast';import Reviews from'../../reviews/Reviews';import axios from'axios';import CardMovie from'../../cardMovie/CardMovie';import routes from'../../../routes';import style from'./MovieDetailsPage.module..scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieDetailsPage=/*#__PURE__*/function(_Component){_inherits(MovieDetailsPage,_Component);var _super=_createSuper(MovieDetailsPage);function MovieDetailsPage(){var _this;_classCallCheck(this,MovieDetailsPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={poster_path:'',original_title:'',overview:'',genres:[],vote_average:null,movies:[],release_date:''};_this.handleGoBack=function(){var _location$state;var _this$props=_this.props,location=_this$props.location,history=_this$props.history;history.push((location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||'/');};return _this;}_createClass(MovieDetailsPage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var movieID,res,movieGenres;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:movieID=this.props.match.params.movieID;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_DATA_BASEURL,\"/movie/\").concat(movieID,\"?api_key=\").concat(process.env.REACT_APP_KEY));case 3:res=_context.sent;movieGenres=[];res.data.genres.forEach(function(el){movieGenres.push(' '+el.name);});this.setState(_objectSpread(_objectSpread({},res.data),{},{genres:movieGenres,poster_path:\"https://www.themoviedb.org/t/p/w600_and_h900_bestv2\".concat(res.data.poster_path),movies:res.data}));case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _location$state2,_location$state3;var _this$props2=this.props,match=_this$props2.match,location=_this$props2.location;var release_datere=this.state.release_date.substring(0,4);return/*#__PURE__*/_jsxs(\"div\",{className:style.box,children:[/*#__PURE__*/_jsx(\"div\",{className:\"buttonBack\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-danger\",onClick:this.handleGoBack,children:\"Back\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CardMovie,{movieCard:this.state,release_datere:release_datere})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-details\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-details-item\",children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"\".concat(match.url,\"/cast\"),state:{from:location===null||location===void 0?void 0:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.from}},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark\",children:\"Cast\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-details-item\",children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"\".concat(match.url,\"/reviews\"),state:{from:location===null||location===void 0?void 0:(_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.from}},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark\",children:\"Reviews\"})})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/cast\"),component:Cast}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/reviews\"),component:Reviews})]})})]});}}]);return MovieDetailsPage;}(Component);export{MovieDetailsPage as default};","map":{"version":3,"sources":["/home/bogdan/GIT/react/goit-react-hw-04-movies/src/components/pages/movieDetailsPage/MovieDetailsPage.js"],"names":["React","Component","Route","Link","Switch","Cast","Reviews","axios","CardMovie","routes","style","MovieDetailsPage","state","poster_path","original_title","overview","genres","vote_average","movies","release_date","handleGoBack","props","location","history","push","from","movieID","match","params","get","process","env","REACT_APP_DATA_BASEURL","REACT_APP_KEY","res","movieGenres","data","forEach","el","name","setState","release_datere","substring","box","pathname","url","path"],"mappings":"+mCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,CAAgBC,IAAhB,CAAsBC,MAAtB,KAAoC,kBAApC,CACA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,C,2FAEqBC,CAAAA,gB,mWACnBC,K,CAAQ,CACNC,WAAW,CAAE,EADP,CAENC,cAAc,CAAE,EAFV,CAGNC,QAAQ,CAAE,EAHJ,CAINC,MAAM,CAAE,EAJF,CAKNC,YAAY,CAAE,IALR,CAMNC,MAAM,CAAE,EANF,CAONC,YAAY,CAAE,EAPR,C,OA6BRC,Y,CAAe,UAAM,qCACW,MAAKC,KADhB,CACXC,QADW,aACXA,QADW,CACDC,OADC,aACDA,OADC,CAEnBA,OAAO,CAACC,IAAR,CAAa,CAAAF,QAAQ,OAAR,EAAAA,QAAQ,SAAR,yBAAAA,QAAQ,CAAEV,KAAV,0DAAiBa,IAAjB,GAAyB,GAAtC,EACD,C,uKAtBD,+JACUC,OADV,CACsB,KAAKL,KAAL,CAAWM,KAAX,CAAiBC,MADvC,CACUF,OADV,uBAGoBnB,CAAAA,KAAK,CAACsB,GAAN,WACbC,OAAO,CAACC,GAAR,CAAYC,sBADC,mBAC+BN,OAD/B,qBACkDI,OAAO,CAACC,GAAR,CAAYE,aAD9D,EAHpB,QAGQC,GAHR,eAMMC,WANN,CAMoB,EANpB,CAOED,GAAG,CAACE,IAAJ,CAASpB,MAAT,CAAgBqB,OAAhB,CAAwB,SAAAC,EAAE,CAAI,CAC5BH,WAAW,CAACX,IAAZ,CAAiB,IAAMc,EAAE,CAACC,IAA1B,EACD,CAFD,EAIA,KAAKC,QAAL,gCACKN,GAAG,CAACE,IADT,MAEEpB,MAAM,CAAEmB,WAFV,CAGEtB,WAAW,8DAAwDqB,GAAG,CAACE,IAAJ,CAASvB,WAAjE,CAHb,CAIEK,MAAM,CAAEgB,GAAG,CAACE,IAJd,IAXF,2D,mIAwBA,iBAAS,wDACqB,KAAKf,KAD1B,CACCM,KADD,cACCA,KADD,CACQL,QADR,cACQA,QADR,CAEP,GAAMmB,CAAAA,cAAc,CAAG,KAAK7B,KAAL,CAAWO,YAAX,CAAwBuB,SAAxB,CAAkC,CAAlC,CAAqC,CAArC,CAAvB,CACA,mBACE,aAAK,SAAS,CAAEhC,KAAK,CAACiC,GAAtB,wBACE,YAAK,SAAS,CAAC,YAAf,uBACE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,wBAFZ,CAGE,OAAO,CAAE,KAAKvB,YAHhB,kBADF,EADF,cAUE,kCACE,KAAC,SAAD,EACE,SAAS,CAAE,KAAKR,KADlB,CAEE,cAAc,CAAE6B,cAFlB,EADF,EAVF,cAgBE,YAAI,SAAS,CAAC,cAAd,wBACE,WAAI,SAAS,CAAC,mBAAd,uBACE,KAAC,IAAD,EACE,EAAE,CAAE,CACFG,QAAQ,WAAKjB,KAAK,CAACkB,GAAX,SADN,CAEFjC,KAAK,CAAE,CACLa,IAAI,CAAEH,QAAF,SAAEA,QAAF,mCAAEA,QAAQ,CAAEV,KAAZ,2CAAE,iBAAiBa,IADlB,CAFL,CADN,uBAQE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,sBAAhC,kBARF,EADF,EADF,cAeE,WAAI,SAAS,CAAC,mBAAd,uBACE,KAAC,IAAD,EACE,EAAE,CAAE,CACFmB,QAAQ,WAAKjB,KAAK,CAACkB,GAAX,YADN,CAEFjC,KAAK,CAAE,CACLa,IAAI,CAAEH,QAAF,SAAEA,QAAF,mCAAEA,QAAQ,CAAEV,KAAZ,2CAAE,iBAAiBa,IADlB,CAFL,CADN,uBAQE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,sBAAhC,qBARF,EADF,EAfF,GAhBF,cA8CE,kCACE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,WAAKE,KAAK,CAACmB,IAAX,SAAX,CAAmC,SAAS,CAAEzC,IAA9C,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,WAAKsB,KAAK,CAACmB,IAAX,YAAX,CAAsC,SAAS,CAAExC,OAAjD,EAFF,GADF,EA9CF,GADF,CAuDD,C,8BA7F2CL,S,SAAzBU,gB","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Link, Switch } from 'react-router-dom';\nimport Cast from '../../cast/Cast';\nimport Reviews from '../../reviews/Reviews';\nimport axios from 'axios';\nimport CardMovie from '../../cardMovie/CardMovie';\nimport routes from '../../../routes';\nimport style from './MovieDetailsPage.module..scss';\n\nexport default class MovieDetailsPage extends Component {\n  state = {\n    poster_path: '',\n    original_title: '',\n    overview: '',\n    genres: [],\n    vote_average: null,\n    movies: [],\n    release_date: '',\n  };\n\n  async componentDidMount() {\n    const { movieID } = this.props.match.params;\n\n    const res = await axios.get(\n      `${process.env.REACT_APP_DATA_BASEURL}/movie/${movieID}?api_key=${process.env.REACT_APP_KEY}`,\n    );\n    let movieGenres = [];\n    res.data.genres.forEach(el => {\n      movieGenres.push(' ' + el.name);\n    });\n\n    this.setState({\n      ...res.data,\n      genres: movieGenres,\n      poster_path: `https://www.themoviedb.org/t/p/w600_and_h900_bestv2${res.data.poster_path}`,\n      movies: res.data,\n    });\n  }\n\n  handleGoBack = () => {\n    const { location, history } = this.props;\n    history.push(location?.state?.from || '/');\n  };\n\n  render() {\n    const { match, location } = this.props;\n    const release_datere = this.state.release_date.substring(0, 4);\n    return (\n      <div className={style.box}>\n        <div className=\"buttonBack\">\n          <button\n            type=\"button\"\n            className=\"btn btn-outline-danger\"\n            onClick={this.handleGoBack}\n          >\n            Back\n          </button>\n        </div>\n        <div>\n          <CardMovie\n            movieCard={this.state}\n            release_datere={release_datere}\n          ></CardMovie>\n        </div>\n        <ul className=\"list-details\">\n          <li className=\"list-details-item\">\n            <Link\n              to={{\n                pathname: `${match.url}/cast`,\n                state: {\n                  from: location?.state?.from,\n                },\n              }}\n            >\n              <button type=\"button\" className=\"btn btn-outline-dark\">\n                Cast\n              </button>\n            </Link>\n          </li>\n          <li className=\"list-details-item\">\n            <Link\n              to={{\n                pathname: `${match.url}/reviews`,\n                state: {\n                  from: location?.state?.from,\n                },\n              }}\n            >\n              <button type=\"button\" className=\"btn btn-outline-dark\">\n                Reviews\n              </button>\n            </Link>\n          </li>\n        </ul>\n        <div>\n          <Switch>\n            <Route path={`${match.path}/cast`} component={Cast}></Route>\n            <Route path={`${match.path}/reviews`} component={Reviews}></Route>\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}