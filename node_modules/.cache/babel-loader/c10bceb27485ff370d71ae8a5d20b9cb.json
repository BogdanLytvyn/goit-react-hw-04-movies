{"ast":null,"code":"import _regeneratorRuntime from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bogdan/GIT/react/goit-react-hw-04-movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Route,Link,Switch}from'react-router-dom';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import MovieList from'../../movieList/MovieList';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MoviesPage=/*#__PURE__*/function(_Component){_inherits(MoviesPage,_Component);var _super=_createSuper(MoviesPage);function MoviesPage(){var _this;_classCallCheck(this,MoviesPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchQuery:'',query:'',movies:[]};_this.handlerInput=function(e){_this.setState({searchQuery:e.target.value});};_this.handlerSubmit=function(e){e.preventDefault();_this.setState({query:_this.state.searchQuery});};return _this;}_createClass(MoviesPage,[{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(prevProps,prevState){var query,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(prevState.query!==this.state.query)){_context.next=6;break;}query=this.state.query;_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_DATA_BASEURL,\"/search/movie?api_key=\").concat(process.env.REACT_APP_KEY,\"&query=\").concat(query));case 4:res=_context.sent;this.setState({movies:res.data.results});case 6:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){var _this$state=this.state,searchQuery=_this$state.searchQuery,movies=_this$state.movies;console.log(movies);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"searchFom\",onSubmit:this.handlerSubmit,children:[/*#__PURE__*/_jsx(TextField,{id:\"standard-search\",label:\"Search field\",type:\"search\",autoComplete:\"off\",autoFocus:true,placeholder:\"movie name\",\"aria-label\":\"Search\",value:searchQuery,onChange:this.handlerInput}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",className:\"buttonForm\",onSubmit:this.handlerSubmit,type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(MovieList,{movies:this.state.movies})]});}}]);return MoviesPage;}(Component);export{MoviesPage as default};","map":{"version":3,"sources":["/home/bogdan/GIT/react/goit-react-hw-04-movies/src/components/pages/moviesPage/MoviesPage.js"],"names":["React","Component","Route","Link","Switch","Button","TextField","MovieList","axios","MoviesPage","state","searchQuery","query","movies","handlerInput","e","setState","target","value","handlerSubmit","preventDefault","prevProps","prevState","get","process","env","REACT_APP_DATA_BASEURL","REACT_APP_KEY","res","data","results","console","log"],"mappings":"28BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,CAAgBC,IAAhB,CAAsBC,MAAtB,KAAoC,kBAApC,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,gJAEqBC,CAAAA,U,2UACnBC,K,CAAQ,CACNC,WAAW,CAAE,EADP,CAENC,KAAK,CAAE,EAFD,CAGNC,MAAM,CAAE,EAHF,C,OAgBRC,Y,CAAe,SAAAC,CAAC,CAAI,CAClB,MAAKC,QAAL,CAAc,CAAEL,WAAW,CAAEI,CAAC,CAACE,MAAF,CAASC,KAAxB,CAAd,EACD,C,OAEDC,a,CAAgB,SAAAJ,CAAC,CAAI,CACnBA,CAAC,CAACK,cAAF,GACA,MAAKJ,QAAL,CAAc,CAAEJ,KAAK,CAAE,MAAKF,KAAL,CAAWC,WAApB,CAAd,EACD,C,mKAjBD,iBAAyBU,SAAzB,CAAoCC,SAApC,qIACMA,SAAS,CAACV,KAAV,GAAoB,KAAKF,KAAL,CAAWE,KADrC,0BAEYA,KAFZ,CAEsB,KAAKF,KAF3B,CAEYE,KAFZ,uBAGsBJ,CAAAA,KAAK,CAACe,GAAN,WACbC,OAAO,CAACC,GAAR,CAAYC,sBADC,kCAC8CF,OAAO,CAACC,GAAR,CAAYE,aAD1D,mBACiFf,KADjF,EAHtB,QAGUgB,GAHV,eAMI,KAAKZ,QAAL,CAAc,CAAEH,MAAM,CAAEe,GAAG,CAACC,IAAJ,CAASC,OAAnB,CAAd,EANJ,2D,4IAmBA,iBAAS,iBACyB,KAAKpB,KAD9B,CACCC,WADD,aACCA,WADD,CACcE,MADd,aACcA,MADd,CAEPkB,OAAO,CAACC,GAAR,CAAYnB,MAAZ,EACA,mBACE,wCACE,cAAM,SAAS,CAAC,WAAhB,CAA4B,QAAQ,CAAE,KAAKM,aAA3C,wBACE,KAAC,SAAD,EACE,EAAE,CAAC,iBADL,CAEE,KAAK,CAAC,cAFR,CAGE,IAAI,CAAC,QAHP,CAIE,YAAY,CAAC,KAJf,CAKE,SAAS,KALX,CAME,WAAW,CAAC,YANd,CAOE,aAAW,QAPb,CAQE,KAAK,CAAER,WART,CASE,QAAQ,CAAE,KAAKG,YATjB,EADF,cAYE,KAAC,MAAD,EACE,OAAO,CAAC,UADV,CAEE,KAAK,CAAC,SAFR,CAGE,SAAS,CAAC,YAHZ,CAIE,QAAQ,CAAE,KAAKK,aAJjB,CAKE,IAAI,CAAC,QALP,oBAZF,GADF,cAuBE,KAAC,SAAD,EAAW,MAAM,CAAE,KAAKT,KAAL,CAAWG,MAA9B,EAvBF,GADF,CA2BD,C,wBAxDqCZ,S,SAAnBQ,U","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Link, Switch } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport MovieList from '../../movieList/MovieList';\nimport axios from 'axios';\n\nexport default class MoviesPage extends Component {\n  state = {\n    searchQuery: '',\n    query: '',\n    movies: [],\n  };\n\n  async componentDidUpdate(prevProps, prevState) {\n    if (prevState.query !== this.state.query) {\n      const { query } = this.state;\n      const res = await axios.get(\n        `${process.env.REACT_APP_DATA_BASEURL}/search/movie?api_key=${process.env.REACT_APP_KEY}&query=${query}`,\n      );\n      this.setState({ movies: res.data.results });\n    }\n  }\n\n  handlerInput = e => {\n    this.setState({ searchQuery: e.target.value });\n  };\n\n  handlerSubmit = e => {\n    e.preventDefault();\n    this.setState({ query: this.state.searchQuery });\n  };\n\n  render() {\n    const { searchQuery, movies } = this.state;\n    console.log(movies);\n    return (\n      <>\n        <form className=\"searchFom\" onSubmit={this.handlerSubmit}>\n          <TextField\n            id=\"standard-search\"\n            label=\"Search field\"\n            type=\"search\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"movie name\"\n            aria-label=\"Search\"\n            value={searchQuery}\n            onChange={this.handlerInput}\n          />\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            className=\"buttonForm\"\n            onSubmit={this.handlerSubmit}\n            type=\"submit\"\n          >\n            Search\n          </Button>\n        </form>\n        <MovieList movies={this.state.movies}></MovieList>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}