{"version":3,"sources":["components/pages/moviesPage/MoviesPage.module.scss","components/pages/moviesPage/MoviesPage.js","components/movieList/MovieList.js","components/movieList/MovieList.module.scss"],"names":["module","exports","MoviesPage","state","total_pages","query","movies","onQuerySearch","a","axios","get","process","res","setState","data","results","handlerInput","e","target","value","handlerSubmit","preventDefault","props","history","push","pathname","location","search","prevProps","this","qs","parse","className","style","formMovie","onSubmit","id","label","type","autoComplete","autoFocus","placeholder","aria-label","onChange","variant","color","Component","withRouter","movieList","map","movie","cardMovie","to","from","cardPic","src","poster_path","alt","title"],"mappings":"yIACAA,EAAOC,QAAU,CAAC,IAAM,wBAAwB,UAAY,8BAA8B,UAAY,8BAA8B,UAAY,gC,uNCK3HC,E,4MACnBC,MAAQ,CACNC,YAAa,EACbC,MAAO,GACPC,OAAQ,I,EAeVC,c,uCAAgB,WAAMF,GAAN,eAAAG,EAAA,sEACIC,IAAMC,IAAN,UACbC,+BADa,iCAC8CA,mCAD9C,kBACiFN,IAFrF,OACRO,EADQ,OAKd,EAAKC,SAAS,CACZP,OAAQM,EAAIE,KAAKC,QACjBX,YAAaQ,EAAIE,KAAKV,cAPV,2C,wDAWhBY,aAAe,SAAAC,GACRA,EAAEC,OAAOC,OACZ,EAAKN,SAAS,CACZT,YAAa,IAGjB,EAAKS,SAAS,CAAER,MAAOY,EAAEC,OAAOC,S,EAGlCC,cAAgB,SAAAH,GACdA,EAAEI,iBACF,EAAKC,MAAMC,QAAQC,KAAK,CACtBC,SAAU,EAAKH,MAAMI,SAASD,SAC9BE,OAAO,SAAD,OAAW,EAAKxB,MAAME,U,wDApChC,SAAmBuB,GACbA,EAAUF,SAASC,SAAWE,KAAKP,MAAMI,SAASC,QACpDE,KAAKtB,cAAcsB,KAAK1B,MAAME,S,+BAGlC,WAAqB,IACXA,EAAUyB,IAAGC,MAAMF,KAAKP,MAAMI,SAASC,QAAvCtB,MACJA,GACFwB,KAAKtB,cAAcF,K,oBAgCvB,WAAU,IAAD,EACgCwB,KAAK1B,MAApCE,EADD,EACCA,MADD,EACQC,OADR,EACgBF,YACvB,OACE,sBAAK4B,UAAU,UAAf,UACE,uBAAMA,UAAWC,IAAMC,UAAWC,SAAUN,KAAKT,cAAjD,UACE,uBACEY,UAAU,aACVI,GAAG,kBACHC,MAAM,eACNC,KAAK,SACLC,aAAa,MACbC,WAAS,EACTC,YAAY,aACZC,aAAW,SACXvB,MAAOd,EACPsC,SAAUd,KAAKb,eAEjB,wBACE4B,QAAQ,WACRC,MAAM,UACNb,UAAU,cACVM,KAAK,SAJP,uBASF,cAAC,IAAD,CAAWhC,OAAQuB,KAAK1B,MAAMG,gB,GAzEEwC,c,gCCNxC,gDA8BeC,iBA1Bf,YAA0C,IAArBzC,EAAoB,EAApBA,OAAQoB,EAAY,EAAZA,SAC3B,OACE,oBAAIM,UAAWC,IAAMe,UAArB,SACG1C,EAAO2C,KAAI,SAAAC,GAAK,OACf,oBAAmBlB,UAAWC,IAAMkB,UAApC,SACE,eAAC,IAAD,CACEC,GAAI,CACF3B,SAAS,UAAD,OAAYyB,EAAMd,IAC1BjC,MAAO,CACLkD,KAAM3B,IAJZ,UAQE,qBACEM,UAAWC,IAAMqB,QACjBC,IAAG,6DAAwDL,EAAMM,aACjEC,IAAI,gBAEN,oBAAIzB,UAAWC,IAAMyB,MAArB,SAA6BR,EAAMQ,YAd9BR,EAAMd,a,mBCPvBpC,EAAOC,QAAU,CAAC,UAAY,6BAA6B,UAAY,6BAA6B,MAAQ,yBAAyB,QAAU","file":"static/js/movies-page.0025109e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"MoviesPage_box__2mNV8\",\"searchFom\":\"MoviesPage_searchFom__eqAKE\",\"TextField\":\"MoviesPage_TextField__2U10w\",\"formMovie\":\"MoviesPage_formMovie__1Dih6\"};","import React, { Component } from 'react';\nimport MovieList from '../../movieList/MovieList';\nimport axios from 'axios';\nimport qs from 'query-string';\nimport style from './MoviesPage.module.scss';\n\nexport default class MoviesPage extends Component {\n  state = {\n    total_pages: 1,\n    query: '',\n    movies: [],\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.location.search !== this.props.location.search) {\n      this.onQuerySearch(this.state.query);\n    }\n  }\n  componentDidMount() {\n    const { query } = qs.parse(this.props.location.search);\n    if (query) {\n      this.onQuerySearch(query);\n    }\n  }\n\n  onQuerySearch = async query => {\n    const res = await axios.get(\n      `${process.env.REACT_APP_DATA_BASEURL}/search/movie?api_key=${process.env.REACT_APP_KEY}&query=${query}`,\n    );\n\n    this.setState({\n      movies: res.data.results,\n      total_pages: res.data.total_pages,\n    });\n  };\n\n  handlerInput = e => {\n    if (!e.target.value) {\n      this.setState({\n        total_pages: 1,\n      });\n    }\n    this.setState({ query: e.target.value });\n  };\n\n  handlerSubmit = e => {\n    e.preventDefault();\n    this.props.history.push({\n      pathname: this.props.location.pathname,\n      search: `query=${this.state.query}`,\n    });\n  };\n\n  render() {\n    const { query, movies, total_pages } = this.state;\n    return (\n      <div className=\"formBox\">\n        <form className={style.formMovie} onSubmit={this.handlerSubmit}>\n          <input\n            className=\"inputMovie\"\n            id=\"standard-search\"\n            label=\"Search field\"\n            type=\"search\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"movie name\"\n            aria-label=\"Search\"\n            value={query}\n            onChange={this.handlerInput}\n          />\n          <button\n            variant=\"outlined\"\n            color=\"primary\"\n            className=\"buttonMovie\"\n            type=\"submit\"\n          >\n            Search\n          </button>\n        </form>\n        <MovieList movies={this.state.movies}></MovieList>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport style from './MovieList.module.scss';\n\nfunction MovieList({ movies, location }) {\n  return (\n    <ul className={style.movieList}>\n      {movies.map(movie => (\n        <li key={movie.id} className={style.cardMovie}>\n          <Link\n            to={{\n              pathname: `/movie/${movie.id}`,\n              state: {\n                from: location,\n              },\n            }}\n          >\n            <img\n              className={style.cardPic}\n              src={`https://www.themoviedb.org/t/p/w600_and_h900_bestv2${movie.poster_path}`}\n              alt=\"Photo title\"\n            />\n            <h5 className={style.title}>{movie.title}</h5>\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default withRouter(MovieList);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"movieList\":\"MovieList_movieList__1c63j\",\"cardMovie\":\"MovieList_cardMovie__2GNEp\",\"title\":\"MovieList_title__3tKys\",\"cardPic\":\"MovieList_cardPic__d7evL\"};"],"sourceRoot":""}